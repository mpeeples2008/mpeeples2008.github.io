<!DOCTYPE html>
<html lang="en">

<head>

    <!-- Simple SfxManager shim inserted to replace complex monkeypatching -->
    <script src="assets/js/inline-script-001.js"></script>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta property="og:image"
        content="https://raw.githubusercontent.com/mpeeples2008/sound_image_assets/main/social_media.png" />
    <meta property="og:image:type" content="image/png" />
    <meta property="og:image:width" content="640" />
    <meta property="og:image:height" content="320" />


    <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
    <title>Gone Viral!</title>

    <link rel="preload"
        href="https://raw.githubusercontent.com/mpeeples2008/sound_image_assets/main/PressStart2P-Regular.woff2"
        as="font" type="font/woff2" crossorigin>


    <!-- Assistant: breathe-only animation -->
    <script id="assistant-breathe-only-script" src="assets/js/assistant-breathe-only-script.js"></script>
    <!-- End Assistant breathe-only animation -->




    <link rel="stylesheet" href="assets/css/styles.css">

</head>

<body>
    <div class="wrap">
        <div class="title-sprite">
            <img src="https://raw.githubusercontent.com/mpeeples2008/sound_image_assets/main/Gone_Viral_long.png"
                alt="Gone Viral title" style="width:400px;max-width:80vw;height:auto;display:block;margin-bottom:10px;">
        </div>
        <div id="board" class="board" role="grid" aria-label="game board"></div>
        <div class="hud">
            <div class="hud-row">
                <div class="level-box">Level: <span id="screens">1</span></div>
                <div class="small scorebox">
                    <div class="score-line">Score: <span id="score">0</span></div>
                    <div class="high-line">High: <span id="highScoreValue">0</span></div>
                </div>
            </div>

            <div class="small meter" id="clicksMeter">
                <img class="meter-icon"
                    src="https://raw.githubusercontent.com/mpeeples2008/sound_image_assets/main/nanobot.png"
                    alt="Nano Bot Icon" width="28" height="28">

                <div class="meter-segments">
                    <div class="seg filled pop" data-idx="0"></div>
                    <div class="seg filled pop" data-idx="1"></div>
                    <div class="seg filled pop" data-idx="2"></div>
                    <div class="seg filled pop" data-idx="3"></div>
                    <div class="seg filled pop" data-idx="4"></div>
                    <div class="seg" data-idx="5"></div>
                    <div class="seg" data-idx="6"></div>
                    <div class="seg" data-idx="7"></div>
                    <div class="seg" data-idx="8"></div>
                    <div class="seg" data-idx="9"></div>
                </div>
                <div class="meter-count"> <span id="clicks">10</span></div>
            </div>

            <div class="control-trio" role="group" aria-label="Controls">
                <button id="startBtn" class="ctrl small-ctrl" aria-label="S">
                    <img src="https://raw.githubusercontent.com/mpeeples2008/sound_image_assets/main/start.png"
                        alt="Start" class="btn-icon">
                </button>
                <button id="restart" class="ctrl small-ctrl" aria-label="Restart">
                    <img src="https://raw.githubusercontent.com/mpeeples2008/sound_image_assets/main/reset.png"
                        alt="Retart" class="btn-icon">
                </button>

                <button id="audioBtn" class="ctrl small-ctrl" aria-label="Audio Settings" title="Audio Settings"
                    data-modal-open="audioPopup">
                    <img src="https://raw.githubusercontent.com/mpeeples2008/sound_image_assets/main/gear.png"
                        alt="Audio" class="btn-icon">
                </button>
                <button id="helpBtn" class="ctrl small-ctrl" aria-label="How to Play" title="How to Play">
                    <img src="https://raw.githubusercontent.com/mpeeples2008/sound_image_assets/main/question.png"
                        alt="Question" class="btn-icon">
                </button>
                <button id="stormBtn" class="ctrl storm-btn" aria-label="Nano Storm" aria-pressed="false"
                    title="Nano Storm"></button>
            </div>

            <div id="assist-badge" class="assist-badge" aria-live="polite" aria-atomic="true" title="Lab Assistant"
                role="button">
                <!-- Inline retro monitor SVG: paste into #assist-badge -->
                <svg class="retro-monitor" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" focusable="false">
                    <defs>
                        <linearGradient id="screenGrad" x1="0" x2="0" y1="0" y2="1">
                            <stop offset="0" stop-color="#0b1320" stop-opacity="0.85" />
                            <stop offset="1" stop-color="#001018" stop-opacity="0.98" />
                        </linearGradient>
                        <filter id="crt" x="-50%" y="-50%" width="200%" height="200%">
                            <feGaussianBlur in="SourceGraphic" stdDeviation="0.2" result="blur" />
                            <feMerge>
                                <feMergeNode in="blur" />
                                <feMergeNode in="SourceGraphic" />
                            </feMerge>
                        </filter>
                        <clipPath id="screenClip">
                            <rect x="10" y="10" width="44" height="44" rx="0" ry="0" />
                        </clipPath>
                    </defs>

                    <!-- monitor body / bezel -->
                    <!-- monitor body / bezel -->
                    <g class="retro-bezel" filter="url(#crt)">
                        <!-- outer case -->
                        <rect x="4" y="4" width="56" height="56" fill="#cfc9b0" stroke="#999684" stroke-width="1.8"
                            rx="0" ry="0" />
                        <!-- inner edge highlight -->
                        <rect x="7" y="7" width="50" height="50" fill="none" stroke="#e8e3cc" stroke-width="0.8" rx="0"
                            ry="0" />
                        <!-- subtle shadow edges -->
                        <rect x="6" y="6" width="52" height="52" fill="none" stroke="rgba(0,0,0,0.25)"
                            stroke-width="0.8" rx="0" ry="0" />

                        <!-- dark shadow base -->
                        <rect x="4" y="60" width="56" height="2" fill="#7d7865" opacity="0.6" />

                        <!-- tiny ventilation dots -->
                        <g opacity="0.25" transform="translate(10,58)">
                            <rect x="0" y="0" width="2" height="1" fill="#333" />
                            <rect x="4" y="0" width="2" height="1" fill="#333" />
                            <rect x="8" y="0" width="2" height="1" fill="#333" />
                            <rect x="12" y="0" width="2" height="1" fill="#333" />
                        </g>
                        <g opacity="0.75" transform="translate(10,58)">
                            <rect x="30" y="-11" width="2" height="1" fill="#333" />
                            <rect x="34" y="-11" width="2" height="1" fill="#333" />
                            <rect x="38" y="-11" width="2" height="1" fill="#333" />
                            <rect x="42" y="-11" width="2" height="1" fill="#333" />
                        </g>
                    </g>



                    <!-- screen area (we will place the face inside this group) -->
                    <g class="retro-screen" clip-path="url(#screenClip)">
                        <!-- screen background gradient -->
                        <rect x="10" y="10" width="44" height="34" fill="url(#screenGrad)" />
                        <!-- faint horizontal reflection -->
                        <rect x="10" y="10" width="44" height="12" fill="rgba(255,255,255,0.02)" />
                        <!-- scanlines are handled by CSS overlay on the containing element, but we also add a subtle pattern via thin lines -->
                        <g opacity="0.06" transform="translate(0,9)">
                            <rect x="10" y="0" width="44" height="34" fill="url(#screenGrad)" />
                        </g>

                        <!-- INSERT FACE GROUP (you can include your existing inline SVG face here) -->
                        <g id="monitor-face" transform="translate(0,0)">
                            <!-- a small copy of eyes+mouth centered on the screen -->
                            <g transform="translate(0,0) scale(0.78) translate(8,2)">
                                <!-- eyes -->
                                <circle cx="21.5" cy="24" r="3.2" fill="#ffd166" />
                                <circle cx="42.5" cy="24" r="3.2" fill="#ffd166" />

                                <!-- eyebrows -->
                                <path id="brow-left" d="M14 18 L22 16" stroke="#ffd166" stroke-width="1.4"
                                    stroke-linecap="round" opacity="0" />
                                <path id="brow-right" d="M42 16 L50 18" stroke="#ffd166" stroke-width="1.4"
                                    stroke-linecap="round" opacity="0" />

                                <!-- mouth shapes: neutral + talk + smile etc. -->

                                <g id="monitor-mouth" transform="translate(0,6)">
                                    <path class="mouth-shape neutral" d="M22 36c4 0 20 0 20 0" stroke="#ffd166"
                                        stroke-width="1.6" stroke-linecap="round" fill="none" />
                                    <polyline class="mouth-shape talk" points="18,35 24,30 30,35 36,30 42,35"
                                        fill="none" stroke="#ffd166" stroke-width="1.6" stroke-linecap="round"
                                        stroke-linejoin="round" />
                                    <path class="mouth-shape smile" d="M20 34c6 6 18 6 24 0" stroke="#ffd166"
                                        stroke-width="1.8" stroke-linecap="round" fill="none" />
                                    <path class="mouth-shape wink" d="M18 36c3 0 6 -6 12 -6" stroke="#ffd166"
                                        stroke-width="1.6" stroke-linecap="round" fill="none" />
                                    <path class="mouth-shape angry" d="M20 36c6 -6 18 -6 24 0" stroke="#ff6b6b"
                                        stroke-width="1.8" stroke-linecap="round" fill="none" />


                                    <path class="mouth-shape worried" d="M20 36c6 6 18 -6 24 0" stroke="#ffd166"
                                        stroke-width="1.6" stroke-linecap="round" fill="none" />

                                    <path class="mouth-shape pout" d="M20 36c6 2 18 2 24 0" stroke="#ffd166"
                                        stroke-width="1.4" stroke-linecap="round" fill="none" opacity="0" />
                                    <path class="mouth-shape grin" d="M18 34c6 8 18 8 24 0" stroke="#ffd166"
                                        stroke-width="1.6" stroke-linecap="round" fill="none" opacity="0" />
                                    <path class="mouth-shape bigsurprised" d="M22 32c4 10 12 10 20 0" stroke="#ffd166"
                                        stroke-width="1.6" stroke-linecap="round" fill="none" opacity="0" />
                                    <path class="mouth-shape smirk" d="M18 36c6 0 18 -2 24 -4" stroke="#ffd166"
                                        stroke-width="1.2" stroke-linecap="round" fill="none" opacity="0" />
                                </g>
                            </g>
                        </g>
                    </g>

                    <!-- base / stand -->
                    <rect x="3" y="50" width="58" height="1" rx="0" fill="#00000" />
                    <rect x="12" y="45.5" width="6" height="3" rx="0" fill="#999684" />

                    <rect x="42" y="53" width="12" height="2" rx="0.5" fill="#0b0b0b" />
                    <!-- tiny LED -->
                    <circle class="retro-led" cx="10" cy="47" r="1.0" fill="#34a832" opacity="0.9" />

                </svg>


                </svg>


                </svg>
            </div>
            <div id="assist-bubble" class="assist-bubble" role="status">
                <div id="assist-text">...</div>
            </div>
        </div>
    </div>

    <script src="assets/js/inline-script-003.js"></script>


    <div class="confetti"
        style="background: rgb(255, 138, 77); left: 987.727px; top: 179.545px; --sx: 0px; --sy: 0px; --tx: 109.48368776928565px; --ty: -9.288933281121935px; opacity: 0; transform: translate(-50%, -50%) scale(1);">
    </div>
    <div class="confetti"
        style="background: rgb(255, 184, 77); left: 987.727px; top: 179.545px; --sx: 0px; --sy: 0px; --tx: -9.40730286205215px; --ty: -98.56647023827949px; opacity: 0; transform: translate(-50%, -50%) scale(1);">
    </div>
    <div class="confetti"
        style="background: rgb(255, 224, 122); left: 987.727px; top: 179.545px; --sx: 0px; --sy: 0px; --tx: -70.21141612739748px; --ty: -101.97096688992497px; opacity: 0; transform: translate(-50%, -50%) scale(1);">
    </div>
    <div class="confetti"
        style="background: rgb(255, 209, 102); left: 987.727px; top: 179.545px; --sx: 0px; --sy: 0px; --tx: -11.2675674341573px; --ty: -104.87350893411943px; opacity: 0; transform: translate(-50%, -50%) scale(1);">
    </div>
    <div class="confetti"
        style="background: rgb(255, 184, 77); left: 987.727px; top: 179.545px; --sx: 0px; --sy: 0px; --tx: -82.48935106897672px; --ty: -107.82177589818342px; opacity: 0; transform: translate(-50%, -50%) scale(1);">
    </div>
    <div class="confetti"
        style="background: rgb(255, 184, 77); left: 987.727px; top: 179.545px; --sx: 0px; --sy: 0px; --tx: 115.0492635946823px; --ty: -56.178653845242636px; opacity: 0; transform: translate(-50%, -50%) scale(1);">
    </div>


    <div class="confetti"
        style="background: rgb(255, 111, 63); left: 1010px; top: 161.25px; --sx: 0px; --sy: 0px; --tx: 43.483811310799766px; --ty: 4.191365416509001px; opacity: 0; transform: translate(-50%, -50%) scale(1);">
    </div>
    <div class="confetti"
        style="background: rgb(255, 184, 77); left: 1010px; top: 161.25px; --sx: 0px; --sy: 0px; --tx: 101.42145338168777px; --ty: -109.88144764334464px; opacity: 0; transform: translate(-50%, -50%) scale(1);">
    </div>


    <script src="assets/js/inline-script-004.js"></script>


    <script src="assets/js/inline-script-005.js"></script>


    <!-- High-score debug & control injection -->
    <script src="assets/js/inline-script-006.js"></script>


    <!-- AUDIO SETTINGS POPUP INSERTED BY CHATGPT -->
    <div id="audioPopup" class="audio-popup" role="dialog" aria-modal="true" style="pointer-events:auto;">
        <div style="display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:8px;">
            <div style="display:flex; gap:8px; align-items:center;">
                <div
                    style="width:36px;height:28px;border-radius:6px;background:rgba(0,0,0,0.12);display:flex;align-items:center;justify-content:center;">
                    <!-- tiny pixel gear svg -->
                    <svg class="gear-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path fill="currentColor"
                            d="M20 12c0-.568-.06-1.122-.174-1.656l1.834-1.612-2-3.464-2.322.786c-.82-.736-1.787-1.308-2.86-1.657L14 2h-4l-.48 2.396c-1.07.35-2.04.92-2.858 1.657L4.34 5.268l-2 3.464 1.834 1.612C4.06 10.878 4 11.432 4 12s.06 1.122.174 1.656L2.34 15.268l2 3.464 2.322-.786c.82.736 1.787 1.308 2.86 1.657L10 22h4l.48-2.396c1.07-.35 2.038-.92 2.858-1.657l2.322.786 2-3.464-1.834-1.613c.113-.535.174-1.09.174-1.657zm-8 4c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4z" />
                    </svg>
                </div>
                <div style="font-size:13px;color:#ffd166;">Settings</div>
            </div>
            <button id="audioClose" class="btn" aria-label="Close audio settings">❌</button>
        </div>

        <div class="row">
            <label for="musicVol">Music Volume</label>
            <input id="musicVol" type="range" min="0" max="1" step="0.01" value="0.20" />
            <div id="musicVolVal" style="width:40px;text-align:right;font-size:11px;color:#ffe9b0;">20%</div>
        </div>

        <div class="row">
            <label for="sfxVol">SFX Volume</label>
            <input id="sfxVol" type="range" min="0" max="1" step="0.01" value="0.50" />
            <div id="sfxVolVal" style="width:40px;text-align:right;font-size:11px;color:#ffe9b0;">50%</div>
        </div>

        <div class="settings-audio-toggle-row">
            <label for="musicEnabledToggle">Music</label>
            <div style="position:relative;">
                <input type="checkbox" id="musicEnabledToggle" class="audio-toggle-input" aria-label="Enable music" checked />
                <span class="audio-toggle-switch" aria-hidden="true"></span>
            </div>
        </div>

        <div class="settings-audio-toggle-row">
            <label for="sfxEnabledToggle">SFX</label>
            <div style="position:relative;">
                <input type="checkbox" id="sfxEnabledToggle" class="audio-toggle-input" aria-label="Enable sound effects" checked />
                <span class="audio-toggle-switch" aria-hidden="true"></span>
            </div>
        </div>

        <div class="row">
            <div class="assistant-control"
                style="margin-top:12px; display:flex; justify-content:space-between; align-items:center; gap:12px;">
                <div style="flex:1">
                    <div style="font-weight:600;">Assistant UI</div>
                    <div style="font-size:12px; color:var(--muted, #9aa6b2);">Enable assistant animations and voice
                        cues.</div>
                </div>
                <div style="flex:0 0 auto; position:relative;">
                    <input type="checkbox" id="assistantToggle" class="assistant-toggle-input"
                        aria-label="Enable assistant" />
                    <span class="assistant-toggle-switch" aria-hidden="true"></span>
                </div>
            </div>

        </div>

        <div class="settings-tutorial-row">
            <label for="tutorialMode">Tutorial Hints</label>
            <select id="tutorialMode" aria-label="Tutorial Hints">
                <option value="full">Full</option>
                <option value="minimal">Minimal</option>
                <option value="off">Off</option>
            </select>
            <button id="replayTutorialBtn" class="btn" type="button">Replay</button>
        </div>

        <div class="settings-reset-row">
            <button id="resetProgressBtn" class="btn" type="button">Reset Progress</button>
            <div class="settings-reset-note">Clears High Score and Achievements</div>
        </div>

        <div style="display:flex;gap:12px;align-items:center;justify-content:space-between;margin-top:8px;">
        </div>
    </div>
    <!-- END AUDIO SETTINGS POPUP -->
    <!-- AUDIO SETTINGS SCRIPT INSERTED BY CHATGPT -->
    <script src="assets/js/inline-script-007.js"></script>
    <!-- END AUDIO SETTINGS SCRIPT -->
    <!-- AUDIO CONTROLS ENFORCER v3 - robust global hooks -->
    <script src="assets/js/inline-script-008.js"></script>
    <!-- END AUDIO CONTROLS ENFORCER v3 -->
    <!-- Mobile Safari audio slider compatibility patch -->
    <script src="assets/js/inline-script-009.js"></script>
    <!-- HOW TO PLAY POPUP -->
    <div id="helpPopup" class="audio-popup" role="dialog" aria-modal="true" style="pointer-events:auto;">
        <div style="display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:8px;">
            <div style="display:flex; gap:8px; align-items:center;">
                <div
                    style="width:36px;height:28px;border-radius:6px;background:rgba(0,0,0,0.12);display:flex;align-items:center;justify-content:center;">
                    <!-- question mark icon -->
                    <svg class="gear-icon" viewBox="0 0 7 10" xmlns="http://www.w3.org/2000/svg"
                        style="width:24px;height:24px;">
                        <path fill="currentColor"
                            d="M2 3C2 3.5523 1.5523 4 1 4C0.44772 4 0 3.5523 0 3C0 1.44772 1.4477 0 3 0C4.5523 0 6 1.44772 6 3C6 4.285 5.5004 4.8678 4.4472 5.3944C4.0004 5.6178 4 5.6183 4 6C4 6.5523 3.5523 7 3 7C2.4477 7 2 6.5523 2 6C2 4.715 2.4996 4.1322 3.5528 3.6056C3.9996 3.3822 4 3.3817 4 3C4 2.55228 3.4477 2 3 2C2.5523 2 2 2.55228 2 3zM3 10C2.4477 10 2 9.5523 2 9C2 8.4477 2.4477 8 3 8C3.5523 8 4 8.4477 4 9C4 9.5523 3.5523 10 3 10z" />
                    </svg>
                </div>
                <div style="font-size:13px;color:#ffd166;">How to Play</div>
            </div>
            <button id="helpClose" class="ctrl small-ctrl" aria-label="Close help">❌</button>
        </div>

        <div class="howto-carousel">
            <button id="helpPrev" class="btn howto-nav" type="button" aria-label="Previous section">◀</button>
            <div class="howto-v2" id="howtoSlides">
                <section class="howto-card active">
                    <h3>Core Loop</h3>
                    <p>Each tap spends 1 nano-bot. Grow viruses until they pop, trigger chain reactions, and clear the
                        board to reach the next level.</p>
                    <div class="howto-step-row">
                        <div class="howto-step">
                            <img src="https://raw.githubusercontent.com/mpeeples2008/sound_image_assets/main/Test_pixel.png"
                                alt="Small virus">
                            <span>Tap to Grow</span>
                        </div>
                        <div class="howto-arrow">→</div>
                        <div class="howto-step">
                            <img src="https://raw.githubusercontent.com/mpeeples2008/sound_image_assets/main/virus3.png"
                                alt="Larger virus">
                            <span>Reach Critical</span>
                        </div>
                        <div class="howto-arrow">→</div>
                        <div class="howto-step">
                            <img src="https://raw.githubusercontent.com/mpeeples2008/sound_image_assets/main/virus4.png"
                                alt="Popped virus">
                            <span>Pop + Chain</span>
                        </div>
                    </div>
                </section>

                <section class="howto-card">
                    <h3>Virus Sizes</h3>
                    <p>Viruses increase one size per tap. At max size, the next growth causes a pop.</p>
                    <div class="howto-size-grid">
                        <div><img
                                src="https://raw.githubusercontent.com/mpeeples2008/sound_image_assets/main/Test_pixel.png"
                                alt="Size 1"><span>S1</span></div>
                        <div><img
                                src="https://raw.githubusercontent.com/mpeeples2008/sound_image_assets/main/virus2.png"
                                alt="Size 2"><span>S2</span></div>
                        <div><img
                                src="https://raw.githubusercontent.com/mpeeples2008/sound_image_assets/main/virus3.png"
                                alt="Size 3"><span>S3</span></div>
                        <div><img
                                src="https://raw.githubusercontent.com/mpeeples2008/sound_image_assets/main/virus4.png"
                                alt="Size 4"><span>S4</span></div>
                    </div>
                </section>

                <section class="howto-card">
                    <h3>Special Viruses</h3>
                    <p><strong>Armored:</strong> First growth hit breaks the shell. The next growth behaves normally.
                    </p>
                    <div class="howto-armored-visual" aria-hidden="true">
                        <div class="howto-armored-preview">
                            <img src="https://raw.githubusercontent.com/mpeeples2008/sound_image_assets/main/virus4.png"
                                alt="Armored virus example">
                        </div>
                    </div>
                    <div class="howto-inline-note">Tip: clear armored viruses early when they block chains.</div>
                </section>

                <section class="howto-card">
                    <h3>Nano Storm</h3>
                    <p>Build a long chain (20+) to charge Nano Storm. Tap the battery button, then tap a target virus.
                    </p>
                    <div class="howto-storm-meter-row" aria-hidden="true">
                        <div class="howto-storm-meter-card">
                            <div class="howto-storm-meter howto-storm-meter-charging">
                                <span style="--fill:0.6;"></span>
                            </div>
                            <div class="howto-storm-meter-label">Charging</div>
                        </div>
                        <div class="howto-storm-meter-card">
                            <div class="howto-storm-meter howto-storm-meter-full">
                                <span style="--fill:1;"></span>
                            </div>
                            <div class="howto-storm-meter-label">Full / Ready</div>
                        </div>
                    </div>
                    <p class="howto-caption">Refill rule: complete one chain of 20+ pops in a single cascade.</p>
                    <div class="howto-storm-grid" aria-hidden="true">
                        <span class="d">◌</span><span class="n">◍</span><span class="d">◌</span>
                        <span class="n">◍</span><span class="c">◎</span><span class="n">◍</span>
                        <span class="d">◌</span><span class="n">◍</span><span class="d">◌</span>
                    </div>
                    <p class="howto-caption">Center gets 2 hits. Orthogonal + diagonal neighbors get 1 hit.</p>
                </section>

                <section class="howto-card">
                    <h3>Scoring and Survival</h3>
                    <ul>
                        <li>Longer chains score more and improve recovery.</li>
                        <li>Clear every virus to complete a level and gain 1 click.</li>
                        <li>If clicks reach 0, it is game over.</li>
                        <li>Use Nano Storm on crowded clusters or armored pressure zones.</li>
                    </ul>
                </section>
            </div>
            <button id="helpNext" class="btn howto-nav" type="button" aria-label="Next section">▶</button>
        </div>
        <div class="howto-carousel-meta"><span id="helpPage">1 / 5</span></div>
    </div>
    <!-- END HOW TO PLAY POPUP -->


    <script src="assets/js/inline-script-010.js"></script>


    <!-- === AI INTRO OVERLAY === -->
    <div id="aiIntro" class="ai-intro-overlay">
        <div class="ai-intro-content">
            <div class="ai-intro-logo" style="margin-bottom:10px;">
                <img src="https://raw.githubusercontent.com/mpeeples2008/sound_image_assets/main/logo_sm.png"
                    alt="Gone Viral Logo" style="width:400px;max-width:70vw;height:auto;display:block;margin:0 auto;">
            </div>
            <div class="ai-face-slot">
                <!-- reuse the same assistant badge visual -->
                <div class="assist-badge intro-face">
                    <svg class="retro-monitor" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
                        <use href="#assistant-face"></use>
                    </svg>
                </div>
            </div>
            <div id="aiIntroText" class="ai-intro-text">
                Initializing containment protocols…
            </div>
            <button id="aiStartBtn" class="ai-start-btn">START</button>
        </div>
    </div>



    <!-- BEGIN: Sarcastic Assistant (added by patch) -->


    <!-- assistant DOM -->
    <div id="assist-badge" class="assist-badge" aria-live="polite" aria-atomic="true" title="Lab Assistant"
        role="button">
        <!-- small inline SVG as fallback sprite (small footprint) -->
        <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='64' height='64' viewBox='0 0 24 24'><rect rx='4' width='24' height='24' fill='%23000' opacity='0.4'/><circle cx='8.5' cy='10' r='1.6' fill='%23ffd166'/><circle cx='15.5' cy='10' r='1.6' fill='%23ffd166'/><rect x='6' y='14' width='12' height='1.6' rx='0.8' fill='%23ffd166' opacity='0.9'/></svg>"
            alt="assistant" />
    </div>
    <div id="assist-bubble" class="assist-bubble" role="status">
        <div id="assist-text">...</div>
    </div>

    <script id="assistant-script" src="assets/js/assistant-script.js"></script>

    <!-- BEGIN: Assistant event pools (added) -->
    <script id="assistant-events" src="assets/js/assistant-events.js"></script>
    <!-- END: Assistant event pools -->
    <!-- BEGIN: Assistant AI SFX integration -->
    <script id="assistant-ai-sfx" src="assets/js/assistant-ai-sfx.js"></script>
    <!-- END: Assistant AI SFX integration -->
    <!-- END: Sarcastic Assistant -->

    <script src="assets/js/inline-script-014.js"></script>

    <script id="assistant-wrap-relocate" src="assets/js/assistant-wrap-relocate.js"></script>

    <script id="assistant-expression-runtime" src="assets/js/assistant-expression-runtime.js"></script>
    <script src="assets/js/inline-script-017.js"></script>

    <script src="assets/js/inline-script-018.js"></script>

    <script src="assets/js/inline-script-019.js"></script>

    <script src="assets/js/inline-script-020.js"></script>




    <!-- START MISSION modal -->
    <div id="startModal" role="dialog" aria-modal="true" aria-label="Mission briefing">
        <div class="inner">
            <div class="modal-text">
                PATHODYNE INDUSTRIES SERVICE TERMINAL <br>
                CONTAINMENT BREACH DETECTED <br>
                Welcome, human operator. I am your Programmable Intelligent eXperimentation and Eradication Liaison! But
                you can just call me PIXEL. <br>
                My autonomous pathogen containment system has been compromised. I need your help to manually activate
                the nano-bot defenses. Eliminate pathogens before they spread, one click at a time. <br>
                Please remain calm. The mortality rate for human operators is... statistically acceptable.
            </div>

            <!-- image anchored to bottom-right of modal -->
            <img class="modal-img"
                src="https://raw.githubusercontent.com/mpeeples2008/sound_image_assets/main/PC_assistant_sm.png"
                alt="Assistant">
        </div>

        <div style="display:flex; gap:10px; align-items:center; justify-content:flex-start;">
            <button id="startModalClose" class="close-btn" aria-label="Close briefing">OK</button>
            <button id="startModalHowTo" class="close-btn" aria-label="Open how to play">How to Play</button>
        </div>
    </div>
    <!-- END START MISSION modal -->


    <!-- START-MISSION modal JS -->
    <script src="assets/js/inline-script-021.js"></script>
    <!-- END START-MISSION modal JS -->


    <!-- START-MISSION modal jitter + SFX behavior -->
    <script src="assets/js/inline-script-022.js"></script>
    <!-- END START-MISSION modal jitter + SFX behavior -->


    <script src="assets/js/inline-script-023.js"></script>


    <script src="assets/js/inline-script-024.js"></script>


    <script src="assets/js/inline-script-025.js"></script>


    <script src="assets/js/inline-script-026.js"></script>

    <!-- Assistant patch: WebAudio SFXManager to improve mobile SFX reliability & avoid overlapping/stuttering -->
    <script src="assets/js/inline-script-027.js"></script>


    <!-- Assistant patch: Preload sfxCache URLs into SfxManager on DOMContentLoaded -->
    <script src="assets/js/inline-script-028.js"></script>


    <!-- Assistant patch: Robust sfxCache watcher + retry for preload (handles late population) -->
    <script src="assets/js/inline-script-029.js"></script>


    <!-- Assistant: explicit preload list inserted -->
    <script src="assets/js/inline-script-030.js"></script>
    <!-- End explicit preload -->


    <script src="assets/js/inline-script-031.js"></script>

    <!-- Modal inert management for accessibility -->
    <script src="assets/js/inline-script-032.js"></script>

    <script src="assets/js/inline-script-033.js"></script>

    <!-- Modal Manager injected -->
    <script src="assets/js/inline-script-034.js"></script>


    <!-- Assistant Modular Wrapper inserted (fallback always) -->
    <script src="assets/js/inline-script-035.js"></script>


    <!-- Assistant fallback shim inserted -->
    <script src="assets/js/inline-script-036.js"></script>
    <!-- End Assistant fallback shim -->


    <!-- Assistant debug overlay shim -->
    <script src="assets/js/inline-script-037.js"></script>
    <!-- End Assistant debug overlay shim -->

</body>

</html>
